Made some Xunit tests and modifications to the system to make it work properly.
